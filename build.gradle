plugins {
    id 'java'
    id 'maven-publish'
    id "com.github.johnrengelman.shadow" version "7.1.1"
}

group 'me.epic'
version '1.0.7-SNAPSHOT'
description "Epic's Spigot Lib"


compileJava.options.encoding = "UTF-8"
compileTestJava.options.encoding = "UTF-8"

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    compileOnly 'org.spigotmc:spigot:1.17-R0.1-SNAPSHOT'
    compileOnly 'org.spigotmc:spigot:1.18.2-R0.1-SNAPSHOT'
    annotationProcessor 'org.projectlombok:lombok:1.18.24'
    compileOnly 'org.projectlombok:lombok:1.18.24'
    compileOnly group: 'net.kyori', name: 'adventure-text-minimessage', version: '4.11.0'
    compileOnly group: 'net.kyori', name: 'adventure-text-serializer-legacy', version: '4.11.0'
    compileOnly 'com.zaxxer:HikariCP:5.0.1'
}

shadowJar {
    archiveClassifier.set('')
}

java {
    withJavadocJar()
    withSourcesJar()
}


publishing {
    publications {
        shadow(MavenPublication) { publication ->
            project.shadow.component(publication)
            artifacts = [shadowJar, javadocJar, sourcesJar]

            repositories {
                maven {


                    credentials {
                        username = "epic"
                        password = System.getenv("EPICREPO_SECRET")
                    }
                    url = 'https://repo.epicebic.xyz/public/'
                }
            }
        }
    }
}